"use strict";(self.webpackChunksite_hderma=self.webpackChunksite_hderma||[]).push([[579],{6579:(I,g,i)=>{i.r(g),i.d(g,{DanhmucModule:()=>Y});var x=i(6895),h=i(9116),Z=i(529),c=i(4006),_=i(9363),b=i(9102),A=i(9632),s=i(5423),E=i(7851),D=i(1094),y=i(8739),N=i(6308),t=i(4650),f=i(5938),S=i(4859),U=i(7392),p=i(9549),T=i(4144),v=i(3267),J=i(266);function w(o,u){if(1&o){const e=t.EpF();t.TgZ(0,"mat-tree-node",7),t._UZ(1,"button",8),t.TgZ(2,"div",9)(3,"div",10)(4,"span",11),t._uU(5," collections_bookmark "),t.qZA(),t.TgZ(6,"span",12),t._uU(7),t.qZA()(),t.TgZ(8,"div",13)(9,"span",14),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw(),d=t.MAs(9);return t.KtG(l.OpenThemDanhmuc(a,d))}),t._uU(10," note_add "),t.qZA(),t.TgZ(11,"span",15),t._uU(12," edit "),t.qZA(),t.TgZ(13,"span",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.deleteDanhmuc(a.id))}),t._uU(14," delete "),t.qZA()()()()}if(2&o){const e=u.$implicit;t.xp6(2),t.MGl("routerLink","detail/",e.Slug,""),t.xp6(5),t.Oqu(e.Title)}}function L(o,u){if(1&o){const e=t.EpF();t.TgZ(0,"mat-tree-node",7)(1,"button",17)(2,"mat-icon",18),t._uU(3),t.qZA()(),t.TgZ(4,"div",19)(5,"div",10)(6,"span",11),t._uU(7," collections_bookmark "),t.qZA(),t.TgZ(8,"span",12),t._uU(9),t.qZA()(),t.TgZ(10,"div",20)(11,"span",21),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw(),d=t.MAs(9);return t.KtG(l.OpenThemDanhmuc(a,d))}),t._uU(12," note_add "),t.qZA(),t.TgZ(13,"span",22),t._uU(14," edit "),t.qZA(),t.TgZ(15,"span",23),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.deleteDanhmuc(a.id))}),t._uU(16," delete "),t.qZA()()()()}if(2&o){const e=u.$implicit,n=t.oxw();t.xp6(1),t.uIk("aria-label","Toggle "+e.Title),t.xp6(2),t.hij(" ",n.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),t.xp6(1),t.MGl("routerLink","detail/",e.Slug,""),t.xp6(5),t.hij("",e.Title," ")}}function F(o,u){if(1&o){const e=t.EpF();t.TgZ(0,"mat-dialog-content")(1,"form",24)(2,"div")(3,"mat-form-field",25)(4,"mat-label"),t._uU(5,"Slug"),t.qZA(),t._UZ(6,"input",26),t.qZA()(),t.TgZ(7,"div")(8,"mat-form-field",27)(9,"mat-label"),t._uU(10,"T\xean Danh M\u1ee5c"),t.qZA(),t._UZ(11,"input",28),t.qZA()()(),t.TgZ(12,"div",29)(13,"button",30),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSave())}),t._uU(14," X\xe1c nh\u1eadn "),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.DanhmucList),t.xp6(5),t.Q6J("formControlName","Slug"),t.xp6(5),t.Q6J("formControlName","Title")}}let k=(()=>{class o{constructor(e,n,r){this.dialog=e,this.fb=n,this._danhmucService=r,this.percentage=0,this._transformer=(a,l)=>({expandable:!!a.children&&a.children.length>0,level:l,...a}),this.treeControl=new E.C2(a=>a.level,a=>a.expandable),this.treeFlattener=new s.JZ(this._transformer,a=>a.level,a=>a.expandable,a=>a.children),this.hasChild=(a,l)=>l.expandable,this.hasNoContent=(a,l)=>""===l.name,this.dataSource1=new s.kc(this.treeControl,this.treeFlattener),this.nest=(a,l="",d="pid")=>{if(a)return a?.filter(m=>m[d]==l).map(m=>({...m,children:this.nest(a,m.id)}))}}OpenThemDanhmuc(e,n){this.temp=e,this.dialog.open(n)}clickupdate(){this.danhmuc.forEach(e=>{this._danhmucService.postDanhmuc(e).subscribe()})}onSave(){this.DanhmucList.get("pid")?.setValue(this.temp.id),this._danhmucService.postDanhmuc(this.DanhmucList.value).subscribe(e=>{e&&(this.resetForm(),alert("T\u1ea1o danh m\u1ee5c th\xe0nh c\xf4ng"),this.dialog.closeAll())})}deleteDanhmuc(e){this._danhmucService.deleteDanhmuc(e).subscribe(n=>{n&&alert("Xo\xe1 danh m\u1ee5c th\xe0nh c\xf4ng")})}resetForm(){this.DanhmucList=this.fb.group({Title:[""],Mota:[""],Type:[""],pid:[""],Slug:[""],Ordering:[0]})}ngOnInit(){this.resetForm(),this._danhmucService.getDanhmucs().subscribe(),this._danhmucService.danhmucs$.subscribe(e=>{e&&(this.danhmuc=e,this.danhmuc.sort((n,r)=>n.Ordering-r.Ordering),this.dataSource1.data=this.nest(e))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.uw),t.Y36(c.qu),t.Y36(D.a))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-danhmuc"]],viewQuery:function(e,n){if(1&e&&(t.Gf(N.YE,5),t.Gf(y.NW,5)),2&e){let r;t.iGM(r=t.CRH())&&(n.sort=r.first),t.iGM(r=t.CRH())&&(n.paginator=r.first)}},decls:10,vars:3,consts:[["autosize","",1,"example-container","bg-white"],["opened","","mode","side",1,"example-sidenav","w-1/3"],["drawer",""],[3,"dataSource","treeControl"],["matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["ThemDanhmucDialog",""],["matTreeNodePadding",""],["mat-icon-button","","disabled",""],["routerLinkActive","bg-gray-200",1,"flex","items-center","justify-between","space-x-4","cursor-pointer","w-full","px-3","py-1","group",3,"routerLink"],[1,"flex","items-center","space-x-2"],[1,"material-icons","text-yellow-500"],[1,""],[1,"hidden","group-hover:flex","items-center","space-x-2"],["title","T\u1ea1o danh m\u1ee5c con",1,"material-icons","cursor-pointer","text-blue-500",3,"click"],["title","Ch\u1ec9nh s\u1eeda",1,"material-icons","text-blue-500"],["title","Xo\xe1",1,"material-icons","cursor-pointer","text-red-500",3,"click"],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],["routerLinkActive","bg-gray-200",1,"flex","items-center","space-x-4","justify-between","cursor-pointer","w-full","group","hover:bg-gray-200","px-3","py-1","rounded",3,"routerLink"],[1,"items-center","space-x-2","hidden","group-hover:flex"],["title","T\u1ea1o danh m\u1ee5c con","matTooltip","T\u1ea1o danh m\u1ee5c con",1,"material-icons","cursor-pointer","text-blue-500",3,"click"],[1,"material-icons","text-blue-500"],[1,"material-icons","cursor-pointer","text-red-500",3,"click"],[3,"formGroup"],["appearance","outline",1,"flex","w-full"],["matInput","","type","text","placeholder","Slug",3,"formControlName"],["appearance","outline",1,"flex","\u01b0-full"],["matInput","","type","text","placeholder","T\xean danh muc",3,"formControlName"],[1,"flex","justify-end"],["mat-button","","matDialogClose","","color","white",1,"bg-green-500","text-white",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-drawer-container",0)(1,"mat-drawer",1,2)(3,"mat-tree",3),t.YNc(4,w,15,2,"mat-tree-node",4),t.YNc(5,L,17,4,"mat-tree-node",5),t.qZA()(),t.TgZ(6,"div"),t._UZ(7,"router-outlet"),t.qZA()(),t.YNc(8,F,15,3,"ng-template",null,6,t.W1O)),2&e&&(t.xp6(3),t.Q6J("dataSource",n.dataSource1)("treeControl",n.treeControl),t.xp6(2),t.Q6J("matTreeNodeDefWhen",n.hasChild))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,S.lW,f.ZT,f.xY,U.Hw,p.KE,p.hX,T.Nt,v.jA,v.kh,J.gM,s.fQ,s.ah,s.eu,s.gi,s.uo,c.sg,c.u,h.lC,h.rH,h.Od],encapsulation:2}),o})();var M=i(3238),O=i(4385);function G(o,u){if(1&o){const e=t.EpF();t.TgZ(0,"span",14),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSubmit())}),t._uU(1,"T\u1ea1o m\u1edbi"),t.qZA()}}function Q(o,u){if(1&o){const e=t.EpF();t.TgZ(0,"span",15),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.updateDanhmuc())}),t._uU(1,"C\u1eadp nh\u1eadt"),t.qZA()}}let C=(()=>{class o{constructor(e,n,r){this.fb=e,this.route=n,this._danhmucService=r,this.percentage=0,this.nest=(a,l="",d="pid")=>{if(a)return a?.filter(m=>m[d]==l).map(m=>({...m,children:this.nest(a,m.id)}))}}onSubmit(){this.DanhmucList.removeControl("id"),this._danhmucService.postDanhmuc(this.DanhmucList.value).subscribe(e=>{e&&alert("T\u1ea1o danh m\u1ee5c th\xe0nh c\xf4ng")}),this.resetForm()}deleteDanhmuc(){this.resetForm()}updateDanhmuc(){this._danhmucService.updateDanhmuc(this.DanhmucList.value).subscribe(e=>{e&&alert("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng")}),this.resetForm()}resetForm(){this.DanhmucList=this.fb.group({id:[""],Title:[""],Mota:[""],Type:[""],pid:[""],Slug:[""],Ordering:[0]})}ngOnInit(){this.resetForm(),this.route.params.subscribe(e=>{this.slug=e.slug,this.slug&&(this._danhmucService.getDanhmucDetail(this.slug).subscribe(),this._danhmucService.danhmuc$.subscribe(n=>{n&&(this.DanhmucList.get("id")?.setValue(n.id),this.DanhmucList.get("Title")?.setValue(n.Title),this.DanhmucList.get("Slug")?.setValue(n.Slug),this.DanhmucList.get("Ordering")?.setValue(n.Ordering),this.DanhmucList.get("pid")?.setValue(n.pid),this.DanhmucList.get("Type")?.setValue(n.Type))}))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu),t.Y36(h.gz),t.Y36(D.a))},o.\u0275cmp=t.Xpm({type:o,selectors:[["taza-base-danhmuc-detail"]],decls:28,vars:7,consts:[[1,"w-full","pt-10",3,"formGroup"],[1,"flex","flex-wrap"],[1,"flex","md:mx-3","md:flex-row","flex-col","mb-6","justify-between","w-full"],["appearance","outline",1,"flex","w-full"],[3,"formControlName"],["value",""],["value","tintucsukien"],[1,"w-full","md:px-3","mb-6","md:mb-0"],["matInput","","type","text","placeholder","Chuy\xean ng\xe0nh",1,"w-full","text-xs",3,"formControlName"],["matInput","","type","text","placeholder","Slug",1,"w-full","text-xs",3,"formControlName"],["matInput","","type","text","placeholder","Ordering",1,"w-full","text-xs",3,"formControlName"],[1,"flex","items-center","md:px-3","mb-6"],["class","px-3 py-1 text-white rounded bg-green-500",3,"click",4,"ngIf"],["class","px-3 py-1 text-white rounded bg-blue-500",3,"click",4,"ngIf"],[1,"px-3","py-1","text-white","rounded","bg-green-500",3,"click"],[1,"px-3","py-1","text-white","rounded","bg-blue-500",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Danh m\u1ee5c"),t.qZA(),t.TgZ(6,"mat-select",4),t._UZ(7,"mat-option",5),t.TgZ(8,"mat-option",6),t._uU(9,"Tin t\u1ee9c s\u1ef1 ki\u1ec7n"),t.qZA()()()(),t.TgZ(10,"div",7)(11,"mat-form-field",3)(12,"mat-label"),t._uU(13," Ti\xeau \u0111\u1ec1"),t.qZA(),t._UZ(14,"input",8),t.qZA()(),t.TgZ(15,"div",7)(16,"mat-form-field",3)(17,"mat-label"),t._uU(18," Slug"),t.qZA(),t._UZ(19,"input",9),t.qZA()(),t.TgZ(20,"div",7)(21,"mat-form-field",3)(22,"mat-label"),t._uU(23," Ordering"),t.qZA(),t._UZ(24,"input",10),t.qZA()(),t.TgZ(25,"div",11),t.YNc(26,G,2,0,"span",12),t.YNc(27,Q,2,0,"span",13),t.qZA()()()),2&e&&(t.Q6J("formGroup",n.DanhmucList),t.xp6(6),t.Q6J("formControlName","Type"),t.xp6(8),t.Q6J("formControlName","Title"),t.xp6(5),t.Q6J("formControlName","Slug"),t.xp6(5),t.Q6J("formControlName","Ordering"),t.xp6(2),t.Q6J("ngIf",!n.slug),t.xp6(1),t.Q6J("ngIf",n.slug))},dependencies:[x.O5,c._Y,c.Fj,c.JJ,c.JL,M.ey,p.KE,p.hX,T.Nt,O.gD,c.sg,c.u]}),o})(),Y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[x.ez,c.u5,Z.JF,_.q,c.UX,A.kz,b.Z_,h.Bz.forChild([{path:"",component:k,children:[{path:"",component:C},{path:"detail/:slug",component:C}]}]),h.Bz]}),o})()}}]);